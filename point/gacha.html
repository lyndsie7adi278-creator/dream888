<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>夢幻彩球扭蛋機 - Dream888</title>
    <style>
        /* 整體樣式設定 */
        :root {
            --primary-red: #ff3e3e;
            --dark-red: #c0392b;
            --gold: #f1c40f;
            --glass: rgba(255, 255, 255, 0.25);
            --machine-width: 340px;
        }

        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle, #2c3e50 0%, #000000 100%);
            font-family: 'Microsoft JhengHei', sans-serif;
            overflow: hidden;
        }

        /* 扭蛋機外殼 */
        .gacha-machine {
            position: relative;
            width: var(--machine-width);
            display: flex;
            flex-direction: column;
            align-items: center;
            filter: drop-shadow(0 20px 50px rgba(0,0,0,0.8));
        }

        /* 頂部裝飾 */
        .machine-top {
            width: 220px;
            height: 40px;
            background: var(--primary-red);
            border-radius: 20px 20px 0 0;
            border: 4px solid #fff;
            border-bottom: none;
            z-index: 3;
        }

        /* 透明圓形艙 - 改進玻璃質感 */
        .dome-container {
            width: 300px;
            height: 300px;
            background: var(--glass);
            border-radius: 50%;
            border: 6px solid #fff;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
            box-shadow: inset 0 0 80px rgba(255,255,255,0.4), 
                        0 10px 20px rgba(0,0,0,0.3);
            z-index: 2;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* 內部的球 */
        .ball {
            position: absolute;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            box-shadow: inset -6px -6px 12px rgba(0,0,0,0.3),
                        inset 8px 8px 12px rgba(255,255,255,0.4);
        }

        /* 滾動動畫：更加劇烈的碰撞感 */
        @keyframes ball-physics {
            0% { transform: translate(0, 0) rotate(0deg); }
            15% { transform: translate(100px, -120px) rotate(120deg); }
            30% { transform: translate(-90px, -180px) rotate(240deg); }
            45% { transform: translate(80px, -60px) rotate(360deg); }
            60% { transform: translate(-100px, -100px) rotate(480deg); }
            80% { transform: translate(50px, -140px) rotate(600deg); }
            100% { transform: translate(0, 0) rotate(720deg); }
        }

        .rolling {
            animation: ball-physics 0.7s cubic-bezier(0.45, 0.05, 0.55, 0.95) infinite !important;
        }

        /* 機器下半部：金屬質感與層次 */
        .machine-base {
            width: 320px;
            height: 280px;
            background: linear-gradient(135deg, var(--primary-red), var(--dark-red));
            border-radius: 20px 20px 60px 60px;
            margin-top: -60px;
            position: relative;
            z-index: 1;
            border: 6px solid #fff;
            box-shadow: inset 0 10px 20px rgba(255,255,255,0.3);
        }

        /* 投幣孔與旋鈕面板 */
        .control-panel {
            width: 200px;
            height: 120px;
            background: #ecf0f1;
            margin: 60px auto 0;
            border-radius: 15px;
            border: 4px solid #bdc3c7;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .crank-handle {
            width: 70px;
            height: 70px;
            background: #bdc3c7;
            border-radius: 50%;
            border: 4px solid #7f8c8d;
            cursor: pointer;
            position: relative;
            transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 5px 0 #95a5a6;
        }

        .crank-handle::after {
            content: '';
            width: 80%;
            height: 15px;
            background: #7f8c8d;
            border-radius: 10px;
        }

        .crank-handle:active {
            transform: rotate(360deg) scale(0.95);
        }

        /* 出蛋口設計 */
        .prize-exit {
            width: 100px;
            height: 70px;
            background: #2c3e50;
            border-radius: 10px 10px 30px 30px;
            position: absolute;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            border-bottom: 8px solid #1a252f;
            display: flex;
            justify-content: center;
            overflow: visible;
        }

        /* 掉出的彩球 */
        #spawned-ball {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            position: absolute;
            top: -40px;
            display: none;
            z-index: 10;
        }

        @keyframes drop-animation {
            0% { transform: translateY(0) scale(0); opacity: 0; }
            40% { transform: translateY(60px) scale(1.1); opacity: 1; }
            70% { transform: translateY(110px) rotate(15deg); }
            100% { transform: translateY(140px) rotate(0deg); opacity: 1; filter: drop-shadow(0 10px 15px rgba(0,0,0,0.5)); }
        }

        .dropping {
            display: block !important;
            animation: drop-animation 0.8s forwards ease-out;
        }

        /* 文字裝飾 */
        .brand-name {
            color: #fff;
            font-size: 24px;
            font-weight: 900;
            text-shadow: 2px 2px 0 var(--dark-red);
            margin-top: 15px;
            letter-spacing: 2px;
        }

        .status-light {
            width: 15px;
            height: 15px;
            background: #2ecc71;
            border-radius: 50%;
            position: absolute;
            top: 10px;
            right: 10px;
            box-shadow: 0 0 10px #2ecc71;
        }

        .status-light.busy {
            background: #e74c3c;
            box-shadow: 0 0 10px #e74c3c;
        }
    </style>
</head>
<body>

<div class="gacha-machine">
    <div class="brand-name">DREAM 彩球挖挖樂</div>
    <div class="machine-top"></div>

    <div class="dome-container" id="dome">
        <div class="ball" style="background: #e74c3c; left: 20%; bottom: 20px;"></div>
        <div class="ball" style="background: #3498db; left: 40%; bottom: 10px;"></div>
        <div class="ball" style="background: #f1c40f; left: 60%; bottom: 25px;"></div>
        <div class="ball" style="background: #2ecc71; left: 75%; bottom: 15px;"></div>
        <div class="ball" style="background: #9b59b6; left: 30%; bottom: 40px;"></div>
        <div class="ball" style="background: #e67e22; left: 55%; bottom: 45px;"></div>
    </div>

    <div class="machine-base">
        <div class="control-panel">
            <div class="status-light" id="light"></div>
            <div class="crank-handle" id="crank"></div>
            <p style="font-size: 12px; color: #7f8c8d; font-weight: bold; margin-top: 5px;">SPIN</p>
        </div>
        
        <div class="prize-exit">
            <div id="spawned-ball"></div>
        </div>
    </div>
</div>

<script>
    const crank = document.getElementById('crank');
    const dome = document.getElementById('dome');
    const light = document.getElementById('light');
    const spawnedBall = document.getElementById('spawned-ball');
    const ballColors = ['#ff3e3e', '#00d2ff', '#32ff7e', '#fff200', '#ff9f1a', '#c56cf0'];

    let isSpinning = false;

    crank.addEventListener('click', () => {
        if (isSpinning) return;

        isSpinning = true;
        light.classList.add('busy');
        spawnedBall.classList.remove('dropping');

        // 1. 艙內的球開始瘋狂旋轉碰撞
        const balls = dome.querySelectorAll('.ball');
        balls.forEach(ball => {
            ball.classList.add('rolling');
            // 給每顆球稍微不同的隨機速度
            ball.style.animationDuration = (Math.random() * 0.3 + 0.5) + 's';
        });

        // 2. 模擬扭蛋運作時間
        setTimeout(() => {
            // 停止滾動
            balls.forEach(ball => ball.classList.remove('rolling'));
            
            // 3. 隨機生成一顆「掉落的球」
            const resultColor = ballColors[Math.floor(Math.random() * ballColors.length)];
            spawnedBall.style.background = `radial-gradient(circle at 30% 30%, ${resultColor}, #000)`;
            spawnedBall.classList.add('dropping');

            // 4. 重置狀態
            setTimeout(() => {
                isSpinning = false;
                light.classList.remove('busy');
            }, 1000);

        }, 2200);
    });
</script>

</body>
</html>
